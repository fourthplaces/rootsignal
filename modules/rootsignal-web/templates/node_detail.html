{% extends "base.html" %}

{% block title %}{{ node.title }}{% endblock %}

{% block content %}
<div class="container">
    <a href="/nodes" style="font-size:13px;color:#0066cc;text-decoration:none;">&larr; Back to signals</a>

    <div class="node-card" style="margin-top:12px;">
        <span class="badge badge-{{ node.type_class }}">{{ node.type_label }}</span>

        <h2 style="margin:8px 0;">{{ node.title }}</h2>
        <p class="summary" style="font-size:15px;">{{ node.summary }}</p>

        {% if node.confidence < 0.6 %}
        <div class="limited-banner">
            This signal has limited verification. It may be incomplete or not yet corroborated by multiple sources.
        </div>
        {% endif %}

        {% if !node.action_url.is_empty() %}
        <a href="{{ node.action_url }}" class="action-btn" target="_blank" rel="noopener" style="margin:12px 0;display:inline-block;">Take Action</a>
        {% else %}
        <p style="font-size:13px;color:#888;margin:12px 0;padding:8px;background:#f5f5f5;border-radius:4px;">
            This is context â€” here's what's happening in your community.
        </p>
        {% endif %}

        <dl class="detail-meta">
            <dt>Last verified</dt>
            <dd>{{ node.last_confirmed }}</dd>
            <dt>Source trust</dt>
            <dd>{{ node.source_trust_label }}</dd>
            <dt>Corroboration</dt>
            <dd>Confirmed by {{ node.corroboration_count }} source{% if node.corroboration_count != 1 %}s{% endif %}</dd>
            <dt>Completeness</dt>
            <dd>{{ node.completeness_label }}</dd>
        </dl>

        {% if !evidence.is_empty() %}
        <div class="evidence-list">
            <h4>Sources</h4>
            {% for ev in evidence %}
            <a href="{{ ev.source_url }}" target="_blank" rel="noopener">{{ ev.source_url }}</a>
            {% endfor %}
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
